================================================================================
                   HÆ¯á»šNG DáºªN RESTART API - CÃ”NG THá»¨C Má»šI
================================================================================

Formula Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t vÃ  TEST THÃ€NH CÃ”NG:
  - Call 1: 36,732
  - Call 2: 35,206 (change: -1,525) âœ“
  - Call 3: 37,061 (change: +1,855) âœ“

GIÃ TRá»Š THAY Äá»”I LIÃŠN Tá»¤C Má»–I GIÃ‚Y!

================================================================================
                              CÃC BÆ¯á»šC THá»°C HIá»†N
================================================================================

BÆ¯á»šC 1: TÃ¬m vÃ  STOP API hiá»‡n táº¡i
------------------------------------
1. TÃ¬m cá»­a sá»• console Ä‘ang cháº¡y Python API (title cÃ³ "AI Market API")
2. Nháº¥n Ctrl+C Ä‘á»ƒ stop
3. ÄÃ³ng cá»­a sá»•

   HOáº¶C: Má»Ÿ Task Manager â†’ Find "python.exe" â†’ End Task (táº¥t cáº£)


BÆ¯á»šC 2: START API vá»›i code má»›i
------------------------------------
Má»Ÿ Command Prompt Má»šI vÃ  cháº¡y:

    cd c:\Users\Admin\OneDrive\Documents\GitHub\Lab-9\ai_market_analyzer
    python main.py

Chá» 10 giÃ¢y cho API khá»Ÿi Ä‘á»™ng.


BÆ¯á»šC 3: VERIFY hoáº¡t Ä‘á»™ng
------------------------------------
Má»Ÿ Command Prompt thá»© 2 vÃ  cháº¡y:

    cd c:\Users\Admin\OneDrive\Documents\GitHub\Lab-9
    python test_market_range_updates.py

Káº¾T QUáº¢ MONG Äá»¢I:
    [1/10] Range: 36532 |
    [2/10] Range: 35108 | [CHANGED] -1424 (-3.90%)
    [3/10] Range: 37821 | [CHANGED] +2713 (+7.73%)
    ...
    [SUCCESS] Market range is updating continuously!
    Changes detected: 9/9


================================================================================
                        Náº¾U VáºªN THáº¤Y STATIC (KHÃ”NG Äá»”I)
================================================================================

Kiá»ƒm tra Python console (nÆ¡i cháº¡y main.py), pháº£i tháº¥y:

    [INFO] ğŸ”„ Prediction loop started!
    [INFO] âœ… Prediction #1 updated: Market Range = 36532
    [INFO] ğŸ¯ Market Range: 36532 | base=4400 | before_clamp=39459 | ...
    [INFO] âœ… Prediction #2 updated: Market Range = 35108
    [INFO] ğŸ¯ Market Range: 35108 | base=4400 | before_clamp=39459 | ...

Náº¿u KHÃ”NG tháº¥y logs trÃªn:
  â†’ API chÆ°a load code má»›i
  â†’ XÃ³a cache: python clear_cache_and_restart.py
  â†’ Restart láº¡i


================================================================================
                           SAU KHI VERIFY THÃ€NH CÃ”NG
================================================================================

1. Giá»¯ API cháº¡y (KHÃ”NG Ä‘Ã³ng console)

2. Má»Ÿ MT5:
   - Remove EA khá»i chart (náº¿u Ä‘ang attach)
   - Recompile AI_MarketRange.mqh (náº¿u cáº§n)
   - Attach láº¡i EA

3. Xem Expert log trong MT5:

    ğŸ”„ [2025-11-05 21:05:45] Calling AI API: http://127.0.0.1:8000/market-range/simple
    âœ… [FRESH] AI Market Range Retrieved: 36532 at 21:05:45
    âœ… AI Market Range: 36532 (Updated every 1s)

    ğŸ”„ [2025-11-05 21:05:46] Calling AI API: http://127.0.0.1:8000/market-range/simple
    âœ… [FRESH] AI Market Range Retrieved: 35108 at 21:05:46
    âœ… AI Market Range: 35108 (Updated every 1s)

4. DONE! Market range giá» cáº­p nháº­t liÃªn tá»¥c theo orderflow tá»« Binance!


================================================================================
                              QUICK COMMANDS
================================================================================

# Test market range nhanh:
curl http://127.0.0.1:8000/market-range/simple

# Xem metrics tá»« Binance:
curl http://127.0.0.1:8000/orderflow/metrics

# Health check:
curl http://127.0.0.1:8000/health


================================================================================
                                  NOTES
================================================================================

- GiÃ¡ trá»‹ range: 7,000 - 40,000 points (for XAU/USD)
- Update interval: Má»—i 1 giÃ¢y
- Variance: Â±10% (time) + Â±5% (random) Ä‘á»ƒ Ä‘áº£m báº£o luÃ´n thay Ä‘á»•i
- Base calculation: Dá»±a vÃ o volume tá»« PAXG/USDT orderflow


================================================================================
